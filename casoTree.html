<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>VideoDownloader Pro - Descarga videos de Facebook y YouTube</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        :root {
            --primary: #4361ee;
            --primary-dark: #3a56d4;
            --secondary: #7209b7;
            --success: #4cc9f0;
            --danger: #f72585;
            --dark: #212529;
            --light: #f8f9fa;
            --gray: #6c757d;
            --border-radius: 12px;
            --box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
            --transition: all 0.3s ease;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        body {
            background: linear-gradient(135deg, #1e3c72, #2a5298);
            color: var(--light);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
        }

        header {
            text-align: center;
            margin-bottom: 40px;
            padding: 20px;
        }

        .logo {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 15px;
            margin-bottom: 10px;
        }

        .logo i {
            font-size: 2.5rem;
            color: var(--success);
        }

        .logo h1 {
            font-size: 2.5rem;
            font-weight: 700;
            background: linear-gradient(45deg, var(--success), var(--primary));
            -webkit-background-clip: text;
            background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        .tagline {
            font-size: 1.2rem;
            color: rgba(255, 255, 255, 0.8);
            margin-bottom: 10px;
        }

        .app-container {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 30px;
            margin-bottom: 40px;
        }

        @media (max-width: 768px) {
            .app-container {
                grid-template-columns: 1fr;
            }
        }

        .card {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            border-radius: var(--border-radius);
            padding: 30px;
            box-shadow: var(--box-shadow);
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        .card-title {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-bottom: 20px;
            font-size: 1.5rem;
        }

        .card-title i {
            color: var(--success);
        }

        .input-group {
            margin-bottom: 20px;
        }

        .input-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: 500;
        }

        .url-input {
            width: 100%;
            padding: 15px;
            border: none;
            border-radius: var(--border-radius);
            background: rgba(255, 255, 255, 0.1);
            color: var(--light);
            font-size: 1rem;
            border: 1px solid rgba(255, 255, 255, 0.2);
            transition: var(--transition);
        }

        .url-input:focus {
            outline: none;
            border-color: var(--success);
            background: rgba(255, 255, 255, 0.15);
        }

        .url-input::placeholder {
            color: rgba(255, 255, 255, 0.5);
        }

        .platform-selector {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
        }

        .platform-btn {
            flex: 1;
            padding: 12px;
            border: none;
            border-radius: var(--border-radius);
            background: rgba(255, 255, 255, 0.1);
            color: var(--light);
            font-weight: 500;
            cursor: pointer;
            transition: var(--transition);
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
        }

        .platform-btn.active {
            background: var(--primary);
        }

        .platform-btn:hover:not(.active) {
            background: rgba(255, 255, 255, 0.2);
        }

        .quality-selector {
            margin-bottom: 20px;
        }

        .quality-options {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(100px, 1fr));
            gap: 10px;
        }

        .quality-option {
            padding: 10px;
            border: none;
            border-radius: var(--border-radius);
            background: rgba(255, 255, 255, 0.1);
            color: var(--light);
            cursor: pointer;
            transition: var(--transition);
            text-align: center;
        }

        .quality-option.active {
            background: var(--secondary);
        }

        .quality-option:hover:not(.active) {
            background: rgba(255, 255, 255, 0.2);
        }

        .download-btn {
            width: 100%;
            padding: 15px;
            border: none;
            border-radius: var(--border-radius);
            background: linear-gradient(45deg, var(--primary), var(--secondary));
            color: white;
            font-size: 1.1rem;
            font-weight: 600;
            cursor: pointer;
            transition: var(--transition);
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
        }

        .download-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.2);
        }

        .download-btn:active {
            transform: translateY(-1px);
        }

        .download-btn:disabled {
            background: var(--gray);
            cursor: not-allowed;
            transform: none;
            box-shadow: none;
        }

        .preview-container {
            text-align: center;
        }

        .video-preview {
            width: 100%;
            max-width: 500px;
            aspect-ratio: 16/9;
            background: rgba(0, 0, 0, 0.3);
            border-radius: var(--border-radius);
            margin: 0 auto 20px;
            display: flex;
            align-items: center;
            justify-content: center;
            overflow: hidden;
        }

        .video-preview video {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .video-preview .placeholder {
            color: rgba(255, 255, 255, 0.5);
            font-size: 1.2rem;
        }

        .video-info {
            text-align: left;
            background: rgba(255, 255, 255, 0.1);
            border-radius: var(--border-radius);
            padding: 20px;
            margin-bottom: 20px;
        }

        .video-title {
            font-size: 1.2rem;
            margin-bottom: 10px;
            font-weight: 600;
        }

        .video-details {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 10px;
        }

        .detail-item {
            display: flex;
            align-items: center;
            gap: 8px;
            font-size: 0.9rem;
            color: rgba(255, 255, 255, 0.8);
        }

        .history-section {
            margin-top: 40px;
        }

        .history-list {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 20px;
        }

        .history-item {
            background: rgba(255, 255, 255, 0.1);
            border-radius: var(--border-radius);
            padding: 15px;
            display: flex;
            gap: 15px;
            align-items: center;
        }

        .history-thumbnail {
            width: 80px;
            height: 60px;
            border-radius: 8px;
            background: rgba(0, 0, 0, 0.3);
            flex-shrink: 0;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .history-info {
            flex: 1;
        }

        .history-title {
            font-size: 0.9rem;
            margin-bottom: 5px;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }

        .history-details {
            font-size: 0.8rem;
            color: rgba(255, 255, 255, 0.7);
        }

        .history-actions {
            display: flex;
            gap: 5px;
        }

        .history-btn {
            width: 30px;
            height: 30px;
            border: none;
            border-radius: 50%;
            background: rgba(255, 255, 255, 0.1);
            color: var(--light);
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: var(--transition);
        }

        .history-btn:hover {
            background: rgba(255, 255, 255, 0.2);
        }

        .loading {
            display: inline-block;
            width: 20px;
            height: 20px;
            border: 3px solid rgba(255, 255, 255, 0.3);
            border-radius: 50%;
            border-top-color: white;
            animation: spin 1s ease-in-out infinite;
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        .alert {
            padding: 15px;
            border-radius: var(--border-radius);
            margin-bottom: 20px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .alert-success {
            background: rgba(76, 201, 240, 0.2);
            border: 1px solid var(--success);
        }

        .alert-error {
            background: rgba(247, 37, 133, 0.2);
            border: 1px solid var(--danger);
        }

        .hidden {
            display: none;
        }

        footer {
            text-align: center;
            margin-top: 40px;
            padding: 20px;
            color: rgba(255, 255, 255, 0.7);
            font-size: 0.9rem;
        }

        .step-indicator {
            display: flex;
            justify-content: center;
            margin-bottom: 30px;
        }

        .step {
            display: flex;
            flex-direction: column;
            align-items: center;
            position: relative;
            width: 100px;
        }

        .step:not(:last-child)::after {
            content: '';
            position: absolute;
            top: 20px;
            right: -50px;
            width: 100px;
            height: 2px;
            background: rgba(255, 255, 255, 0.3);
        }

        .step-circle {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background: rgba(255, 255, 255, 0.1);
            display: flex;
            align-items: center;
            justify-content: center;
            margin-bottom: 10px;
            font-weight: 600;
            transition: var(--transition);
        }

        .step.active .step-circle {
            background: var(--primary);
        }

        .step.completed .step-circle {
            background: var(--success);
        }

        .step-text {
            font-size: 0.9rem;
            text-align: center;
        }

        .download-options {
            margin-top: 20px;
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 10px;
        }

        .format-option {
            padding: 12px;
            border: none;
            border-radius: var(--border-radius);
            background: rgba(255, 255, 255, 0.1);
            color: var(--light);
            cursor: pointer;
            transition: var(--transition);
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
        }

        .format-option.active {
            background: var(--secondary);
        }

        .format-option:hover:not(.active) {
            background: rgba(255, 255, 255, 0.2);
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <div class="logo">
                <i class="fas fa-cloud-download-alt"></i>
                <h1>VideoDownloader Pro</h1>
            </div>
            <p class="tagline">Descarga videos de Facebook y YouTube en alta calidad</p>
            
            <div class="step-indicator">
                <div class="step active">
                    <div class="step-circle">1</div>
                    <div class="step-text">Pegar URL</div>
                </div>
                <div class="step">
                    <div class="step-circle">2</div>
                    <div class="step-text">Seleccionar Calidad</div>
                </div>
                <div class="step">
                    <div class="step-circle">3</div>
                    <div class="step-text">Descargar</div>
                </div>
            </div>
        </header>

        <div class="app-container">
            <div class="card">
                <h2 class="card-title"><i class="fas fa-link"></i> Ingresar URL del Video</h2>
                
                <div class="input-group">
                    <label for="videoUrl">Pega la URL del video</label>
                    <input type="text" id="videoUrl" class="url-input" placeholder="https://www.youtube.com/watch?v=... o https://www.facebook.com/watch/?v=...">
                </div>
                
                <div class="platform-selector">
                    <button class="platform-btn active" data-platform="youtube">
                        <i class="fab fa-youtube"></i> YouTube
                    </button>
                    <button class="platform-btn" data-platform="facebook">
                        <i class="fab fa-facebook"></i> Facebook
                    </button>
                </div>
                
                <div class="input-group">
                    <label>Selecciona la calidad</label>
                    <div class="quality-options">
                        <button class="quality-option active" data-quality="1080">1080p</button>
                        <button class="quality-option" data-quality="720">720p</button>
                        <button class="quality-option" data-quality="480">480p</button>
                        <button class="quality-option" data-quality="360">360p</button>
                    </div>
                </div>

                <div class="input-group">
                    <label>Formato de descarga</label>
                    <div class="download-options">
                        <button class="format-option active" data-format="mp4">
                            <i class="fas fa-film"></i> MP4 (Video)
                        </button>
                        <button class="format-option" data-format="mp3">
                            <i class="fas fa-music"></i> MP3 (Audio)
                        </button>
                    </div>
                </div>
                
                <button id="downloadBtn" class="download-btn">
                    <i class="fas fa-download"></i> Descargar Video
                </button>
            </div>
            
            <div class="card preview-container">
                <h2 class="card-title"><i class="fas fa-play-circle"></i> Vista Previa</h2>
                
                <div class="video-preview">
                    <div class="placeholder">
                        <i class="fas fa-film fa-3x"></i>
                        <p>Vista previa del video aparecerá aquí</p>
                    </div>
                </div>
                
                <div class="video-info hidden">
                    <div class="video-title" id="videoTitle">Título del video</div>
                    <div class="video-details">
                        <div class="detail-item">
                            <i class="fas fa-clock"></i>
                            <span id="videoDuration">--:--</span>
                        </div>
                        <div class="detail-item">
                            <i class="fas fa-eye"></i>
                            <span id="videoViews">0 vistas</span>
                        </div>
                        <div class="detail-item">
                            <i class="fas fa-calendar"></i>
                            <span id="videoDate">Fecha desconocida</span>
                        </div>
                        <div class="detail-item">
                            <i class="fas fa-user"></i>
                            <span id="videoAuthor">Autor desconocido</span>
                        </div>
                    </div>
                </div>
                
                <div id="successAlert" class="alert alert-success hidden">
                    <i class="fas fa-check-circle"></i>
                    <span>¡Video listo para descargar!</span>
                </div>
                
                <div id="errorAlert" class="alert alert-error hidden">
                    <i class="fas fa-exclamation-circle"></i>
                    <span id="errorMessage">Error al procesar el video</span>
                </div>
            </div>
        </div>
        
        <div class="card history-section">
            <h2 class="card-title"><i class="fas fa-history"></i> Descargas Recientes</h2>
            <div class="history-list" id="historyList">
                <!-- Los elementos de historial se agregarán aquí dinámicamente -->
            </div>
        </div>
        
        <footer>
            <p>VideoDownloader Pro &copy; 2023 - Una herramienta para descargar videos de forma rápida y sencilla</p>
            <p><i class="fas fa-exclamation-triangle"></i> Solo para uso personal. Respeta los derechos de autor.</p>
        </footer>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // Elementos DOM
            const videoUrlInput = document.getElementById('videoUrl');
            const platformButtons = document.querySelectorAll('.platform-btn');
            const qualityButtons = document.querySelectorAll('.quality-option');
            const formatButtons = document.querySelectorAll('.format-option');
            const downloadBtn = document.getElementById('downloadBtn');
            const videoPreview = document.querySelector('.video-preview');
            const videoInfo = document.querySelector('.video-info');
            const videoTitle = document.getElementById('videoTitle');
            const videoDuration = document.getElementById('videoDuration');
            const videoViews = document.getElementById('videoViews');
            const videoDate = document.getElementById('videoDate');
            const videoAuthor = document.getElementById('videoAuthor');
            const successAlert = document.getElementById('successAlert');
            const errorAlert = document.getElementById('errorAlert');
            const errorMessage = document.getElementById('errorMessage');
            const historyList = document.getElementById('historyList');
            const steps = document.querySelectorAll('.step');

            // Estado de la aplicación
            let currentPlatform = 'youtube';
            let currentQuality = '1080';
            let currentFormat = 'mp4';
            let currentVideoData = null;

            // Event Listeners
            platformButtons.forEach(btn => {
                btn.addEventListener('click', function() {
                    platformButtons.forEach(b => b.classList.remove('active'));
                    this.classList.add('active');
                    currentPlatform = this.dataset.platform;
                    updateStepIndicator(1);
                    resetPreview();
                });
            });

            qualityButtons.forEach(btn => {
                btn.addEventListener('click', function() {
                    qualityButtons.forEach(b => b.classList.remove('active'));
                    this.classList.add('active');
                    currentQuality = this.dataset.quality;
                    updateStepIndicator(2);
                });
            });

            formatButtons.forEach(btn => {
                btn.addEventListener('click', function() {
                    formatButtons.forEach(b => b.classList.remove('active'));
                    this.classList.add('active');
                    currentFormat = this.dataset.format;
                });
            });

            videoUrlInput.addEventListener('input', function() {
                if (this.value.trim() !== '') {
                    updateStepIndicator(1, true);
                    fetchVideoInfo();
                } else {
                    resetPreview();
                }
            });

            downloadBtn.addEventListener('click', function() {
                const url = videoUrlInput.value.trim();
                
                if (!url) {
                    showError('Por favor, ingresa una URL válida');
                    return;
                }

                if (!isValidUrl(url)) {
                    showError('La URL ingresada no es válida');
                    return;
                }

                // Iniciar proceso de descarga
                startDownload(url);
            });

            // Funciones
            function isValidUrl(url) {
                try {
                    new URL(url);
                    return true;
                } catch (e) {
                    return false;
                }
            }

            function fetchVideoInfo() {
                const url = videoUrlInput.value.trim();
                if (!url) return;

                downloadBtn.disabled = true;
                downloadBtn.innerHTML = '<div class="loading"></div> Procesando...';

                // Usar un servicio de API para obtener información del video
                fetchVideoData(url)
                    .then(data => {
                        currentVideoData = data;
                        displayVideoInfo(data);
                        downloadBtn.disabled = false;
                        downloadBtn.innerHTML = '<i class="fas fa-download"></i> Descargar Video';
                        showSuccess('Video procesado correctamente');
                        updateStepIndicator(2, true);
                    })
                    .catch(error => {
                        console.error('Error:', error);
                        showError('No se pudo obtener información del video. Verifica la URL.');
                        downloadBtn.disabled = false;
                        downloadBtn.innerHTML = '<i class="fas fa-download"></i> Descargar Video';
                    });
            }

            function fetchVideoData(url) {
                return new Promise((resolve, reject) => {
                    // En una implementación real, aquí harías una llamada a una API
                    // Por ahora simulamos una respuesta después de un tiempo
                    setTimeout(() => {
                        // Simular datos de video
                        const isYouTube = url.includes('youtube.com') || url.includes('youtu.be');
                        const isFacebook = url.includes('facebook.com');
                        
                        if ((isYouTube && currentPlatform === 'youtube') || 
                            (isFacebook && currentPlatform === 'facebook')) {
                            
                            const videoId = isYouTube ? 
                                (url.match(/[?&]v=([^&]+)/) || url.match(/youtu\.be\/([^?]+)/))?.[1] || 'unknown' :
                                (url.match(/v=(\d+)/) || url.match(/\/watch\/(\d+)/))?.[1] || 'unknown';
                                
                            resolve({
                                title: `Video de ${isYouTube ? 'YouTube' : 'Facebook'} - ${videoId}`,
                                duration: isYouTube ? '15:30' : '4:22',
                                views: isYouTube ? '1,245,678' : '45,321',
                                date: new Date().toLocaleDateString(),
                                author: isYouTube ? 'Canal Ejemplo' : 'Usuario Facebook',
                                thumbnail: isYouTube ? 
                                    `https://img.youtube.com/vi/${videoId}/hqdefault.jpg` : 
                                    null
                            });
                        } else {
                            reject(new Error('Plataforma no coincide con la URL'));
                        }
                    }, 1500);
                });
            }

            function displayVideoInfo(data) {
                videoTitle.textContent = data.title;
                videoDuration.textContent = data.duration;
                videoViews.textContent = data.views + ' vistas';
                videoDate.textContent = data.date;
                videoAuthor.textContent = data.author;

                // Mostrar elementos
                videoInfo.classList.remove('hidden');
                
                // Mostrar miniatura si está disponible
                if (data.thumbnail) {
                    videoPreview.innerHTML = `
                        <img src="${data.thumbnail}" alt="Miniatura del video" style="width:100%;height:100%;object-fit:cover;">
                    `;
                } else {
                    videoPreview.innerHTML = `
                        <div style="width:100%;height:100%;background:linear-gradient(45deg, #${currentPlatform === 'youtube' ? 'ff0000' : '1877f2'}, #${currentPlatform === 'youtube' ? '282828' : '0d8bf1'});display:flex;align-items:center;justify-content:center;color:white;font-size:1.5rem;">
                            <i class="fab fa-${currentPlatform}"></i>
                        </div>
                    `;
                }
            }

            function startDownload(url) {
                downloadBtn.disabled = true;
                downloadBtn.innerHTML = '<div class="loading"></div> Preparando descarga...';

                // Usar un servicio de descarga de video
                const downloadUrl = generateDownloadUrl(url, currentQuality, currentFormat);
                
                // Crear enlace de descarga
                const a = document.createElement('a');
                a.href = downloadUrl;
                a.target = '_blank';
                a.download = `video_${currentPlatform}_${currentQuality}p.${currentFormat}`;
                
                // Simular clic en el enlace
                document.body.appendChild(a);
                a.click();
                document.body.removeChild(a);
                
                // Mostrar mensaje de éxito
                showSuccess(`Descarga de ${currentFormat.toUpperCase()} en calidad ${currentQuality}p iniciada`);
                
                // Agregar al historial
                addToHistory(currentVideoData.title, currentPlatform, currentQuality, currentFormat);
                
                // Restablecer botón
                setTimeout(() => {
                    downloadBtn.disabled = false;
                    downloadBtn.innerHTML = '<i class="fas fa-download"></i> Descargar Video';
                    updateStepIndicator(3, true);
                }, 1000);
            }

            function generateDownloadUrl(url, quality, format) {
                // En una implementación real, aquí conectarías con un servicio de descarga
                // Por ahora usamos servicios públicos (nota: estos pueden cambiar)
                const isYouTube = url.includes('youtube.com') || url.includes('youtu.be');
                
                if (isYouTube) {
                    // Servicio para YouTube
                    const videoId = (url.match(/[?&]v=([^&]+)/) || url.match(/youtu\.be\/([^?]+)/))?.[1];
                    if (videoId) {
                        if (format === 'mp3') {
                            return `https://ytmp3.cc/en13/?v=${videoId}`;
                        } else {
                            return `https://ssyoutube.com/en/download-youtube-video?url=https://www.youtube.com/watch?v=${videoId}`;
                        }
                    }
                } else {
                    // Servicio para Facebook
                    return `https://getfbstuff.com/download?url=${encodeURIComponent(url)}`;
                }
                
                // Fallback: abrir en una nueva pestaña para descarga manual
                return url;
            }

            function resetPreview() {
                videoInfo.classList.add('hidden');
                videoPreview.innerHTML = `
                    <div class="placeholder">
                        <i class="fas fa-film fa-3x"></i>
                        <p>Vista previa del video aparecerá aquí</p>
                    </div>
                `;
                hideAlerts();
                updateStepIndicator(1);
            }

            function showSuccess(message) {
                successAlert.querySelector('span').textContent = message;
                successAlert.classList.remove('hidden');
                errorAlert.classList.add('hidden');
            }

            function showError(message) {
                errorMessage.textContent = message;
                errorAlert.classList.remove('hidden');
                successAlert.classList.add('hidden');
            }

            function hideAlerts() {
                successAlert.classList.add('hidden');
                errorAlert.classList.add('hidden');
            }

            function addToHistory(title, platform, quality, format) {
                const historyItem = document.createElement('div');
                historyItem.className = 'history-item';
                
                // Tamaño simulado basado en calidad y formato
                let size;
                if (format === 'mp3') {
                    size = '5 MB';
                } else {
                    size = quality === '1080' ? '45 MB' : 
                          quality === '720' ? '25 MB' : 
                          quality === '480' ? '15 MB' : '8 MB';
                }
                
                historyItem.innerHTML = `
                    <div class="history-thumbnail">
                        <i class="fab fa-${platform}"></i>
                    </div>
                    <div class="history-info">
                        <div class="history-title">${title}</div>
                        <div class="history-details">${platform === 'youtube' ? 'YouTube' : 'Facebook'} • ${quality}p • ${format.toUpperCase()} • ${size}</div>
                    </div>
                    <div class="history-actions">
                        <button class="history-btn re-download"><i class="fas fa-redo"></i></button>
                        <button class="history-btn delete"><i class="fas fa-trash"></i></button>
                    </div>
                `;
                
                // Agregar al inicio de la lista
                historyList.insertBefore(historyItem, historyList.firstChild);
                
                // Agregar event listeners a los botones
                historyItem.querySelector('.re-download').addEventListener('click', function() {
                    // Simular redescarga
                    showSuccess('Redescargando video...');
                });
                
                historyItem.querySelector('.delete').addEventListener('click', function() {
                    historyList.removeChild(historyItem);
                    showSuccess('Elemento eliminado del historial');
                });
            }

            function updateStepIndicator(stepNumber, completed = false) {
                steps.forEach((step, index) => {
                    step.classList.remove('active', 'completed');
                    
                    if (index + 1 < stepNumber) {
                        step.classList.add('completed');
                    } else if (index + 1 === stepNumber) {
                        step.classList.add('active');
                    }
                });
            }

            // Cargar historial desde localStorage si existe
            function loadHistory() {
                const savedHistory = localStorage.getItem('videoDownloaderHistory');
                if (savedHistory) {
                    const history = JSON.parse(savedHistory);
                    history.forEach(item => {
                        addToHistory(item.title, item.platform, item.quality, item.format);
                    });
                }
            }

            // Guardar historial en localStorage
            function saveToHistory(title, platform, quality, format) {
                const historyItem = {
                    title,
                    platform,
                    quality,
                    format,
                    date: new Date().toISOString()
                };
                
                let history = JSON.parse(localStorage.getItem('videoDownloaderHistory') || '[]');
                history.unshift(historyItem);
                
                // Mantener solo los últimos 10 elementos
                if (history.length > 10) {
                    history = history.slice(0, 10);
                }
                
                localStorage.setItem('videoDownloaderHistory', JSON.stringify(history));
            }

            // Modificar la función addToHistory para guardar en localStorage
            const originalAddToHistory = addToHistory;
            addToHistory = function(title, platform, quality, format) {
                originalAddToHistory(title, platform, quality, format);
                saveToHistory(title, platform, quality, format);
            };

            // Cargar historial al iniciar
            loadHistory();
        });
    </script>
</body>
</html>